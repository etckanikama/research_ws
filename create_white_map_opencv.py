import cv2
import numpy as np

# 画像のサイズを指定
width = 662
height = 1263
# height = 6100
# 白い背景の画像を作成
image = np.full((height, width, 3), (65, 105, 225), dtype=np.uint8)
# image = np.full((height, width, 3), (0, 0, 0), dtype=np.uint8)

# 矩形の座標を辞書型で定義
rect_dict = {   0: [[246.5, 350.5], [254.0, 350.5], [254.0, 1263.0], [246.5, 1263.0]],
                1: [[107.5, 350.5], [246.5, 350.5], [246.5, 358.0], [107.5, 357.5]],
                2: [[107.5, 242.5], [115.0, 242.5], [115.0, 350.5], [107.5, 350.5]],
                3: [[0.0, 242.5], [107.5, 242.5], [107.5, 250.0], [0.0, 250.0]],
                4: [[0.0, 127.5], [125.0, 127.5], [125.0, 135.0], [0.0, 135.0]],
                5: [[117.5, 0.0], [125.0, 0.0], [125.0, 127.5], [117.5, 127.5]],
                6: [[219.0, 0.0], [226.0, 0.0], [226.0, 122.0], [219.0, 122.0]],
                7: [[226.0, 114.5], [662.0, 114.5], [662.0, 122.0], [226.0, 122.0]],
                8: [[355.5, 253.5], [662.0, 253.5], [662.0, 261.0], [355.5, 261.0]],
                9: [[348.0, 253.5], [355.5, 253.5], [355.5, 1263.0], [348.0, 1263.0]],
                10: [[447.5, 1208.5], [662.0, 1208.5], [662.0, 1216.0], [447.5, 1216.0]], #間隔80cmにした：厳密には違うかも
                11: [[447.5, 1128.5], [455.0, 1128.5], [455.0, 1208.5], [447.5, 1208.5]],
                # 10: [[447.5, 1163.5], [662.0, 1163.5], [662.0, 1171.0], [447.5, 1171.0]], 厳密には違うかもしれない
                # 11: [[447.5, 1128.5], [455.0, 1128.5], [455.0, 1163.5], [447.5, 1163.5]],
                12: [[447.5, 1121.0], [662.0, 1121.0], [662.0, 1128.5], [447.5, 1128.5]],
                13: [[447.5, 1030.5], [662.0, 1030.5], [662.0, 1038.0], [447.5, 1038.0]],
                14: [[447.5, 937.0], [455.0, 937.0], [455.0, 1030.5], [447.5, 1030.5]],
                15: [[447.5, 929.5], [662.0, 929.5], [662.0, 937.0], [447.5, 937.0]],
16: [[447.5, 840.5], [662.0, 840.5], [662.0, 848.0], [447.5, 848.0]],
17: [[447.5, 745.5], [455.0, 745.5], [455.0, 840.5], [447.5, 840.5]],
18: [[447.5, 738.0], [662.0, 738.0], [662.0, 745.5], [447.5, 745.5]],
19: [[447.5, 650.5], [662.0, 650.5], [662.0, 658.0], [447.5, 658.0]],
20: [[447.5, 554.5], [455.0, 554.5], [455.0, 650.5], [447.5, 650.5]],
21: [[447.5, 547.0], [662.0, 547.0], [662.0, 555.0], [447.5, 555.0]],
22: [[447.5, 459.5], [662.0, 459.5], [662.0, 467.0], [447.5, 467.0]],
23: [[447.5, 332.5], [455.0, 332.5], [455.0, 457.5], [447.5, 457.5]],
24: [[447.5, 325.0], [662.0, 325.0], [662.0, 332.5], [447.5, 332.5]],
# 25: [[221.5, 1063.0], [271.5, 1063.0], [271.5, 1070.5], [221.5, 1070.5]]#片側に50cmの白線を配置してみる
# 25: [[171.5, 1063.0], [271.5, 1063.0], [271.5, 1070.5], [171.5, 1070.5]]#片側に100cmの白線を配置してみる
25: [[171.5, 1063.0], [430.5, 1063.0], [430.5, 1070.5], [171.5, 1070.5]]#めちゃくちゃ極端


             }
# rect_dict = {0: [[246.5, 100.0], [254.0, 100.0], [254.0, 6100.0], [246.5, 6100.0]],
#              1: [[0.0, 100.0], [246.5, 100.0], [246.5, 107.5], [0.0, 107.5]],
#              2: [[0.0, 0.0], [662.0, 0.0], [662.0, 7.5], [0.0, 7.5]],
#              3: [[355.5, 100.0], [662.0, 100.0], [662.0, 107.5], [355.5, 107.5]],
#              4: [[348.0, 100.0], [355.5, 100.0], [355.5, 6100.0], [348.0, 6100.0]]
# }
# 矩形を白色で塗りつぶし
for key in rect_dict.keys():
    rect = np.array([rect_dict[key]], dtype=np.int32)
    cv2.fillPoly(image, rect, (255, 255, 255))
    # cv2.putText(image, str(key), tuple(map(int, rect_dict[key][0])), cv2.FONT_HERSHEY_SIMPLEX, 1, (0, 0, 0), 2)

# 画像内で白情報のcv座標を取得
print(image.shape)
h, w,c = image.shape
print(h, w,c)
print(type(image))
print(image[0,0])
# 白色ピクセルの座標を格納するリスト
white_pixels = []

for y in range(height):
    for x in range(width):
        b, g, r = image[y,x]
        if b == 255 and g == 255 and r == 255:
            white_pixels.append((x,y))


# # 矩形の切り抜き
# start_x = 100
# start_y = 500
# camera_range_height = 200
# camera_range_width = 300
# cropped_image = image[start_y:start_y+camera_range_height, start_x:start_x+camera_range_width]
# cv2.imshow("cropped_image",cropped_image)
# print(image[1262,355])

# for coodinate in white_pixels:
#     print(coodinate)

# 画像を表示
# cv2.imshow("SB_WhiteLaneMap", image)
# cv2.waitKey(0)
# cv2.destroyAllWindows()
cv2.imwrite("add_hige_x200length_kyokutan.png", image)
# cv2.imwrite("cropped_image_straight.png",cropped_image)